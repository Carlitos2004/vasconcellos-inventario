{% extends "base.html" %}
{% block title %}Reservar Cita | Vasconcellos{% endblock %}
{% block content %}

<!-- LIBRERÍA CALENDARIO PREMIUM (Flatpickr Dark) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://npmcdn.com/flatpickr/dist/themes/dark.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script>

<!-- CONTENEDOR MAESTRO -->
<div class="split-layout">
    
    <!-- COLUMNA IZQUIERDA: VISUAL -->
    <div class="visual-side">
        <div class="visual-content">
            <div class="brand-tag">VASCONCELLOS ESTÉTICA</div>
            <h1>TU AUTO<br><span class="text-stroke">MERECE LO MEJOR.</span></h1>
            <p class="visual-desc">Reserva tu tratamiento exclusivo hoy. Garantizamos resultados de exhibición.</p>
            
            <div class="features-list">
                <div class="feature">
                    <div class="f-icon"><i class="fas fa-shield-alt"></i></div>
                    <div>
                        <strong>Protección Certificada</strong>
                        <span>Productos de grado profesional.</span>
                    </div>
                </div>
                <div class="feature">
                    <div class="f-icon"><i class="fas fa-stopwatch"></i></div>
                    <div>
                        <strong>Sin Esperas</strong>
                        <span>Tu hora es sagrada. Respetamos tu tiempo.</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="overlay"></div>
    </div>

    <!-- COLUMNA DERECHA: FORMULARIO -->
    <div class="form-side">
        <div class="form-container">
            <div class="form-header">
                <h2>AGENDA TU VISITA</h2>
                <p>Completa los datos para coordinar el ingreso.</p>
            </div>

            <form method="POST" class="premium-form">
                
                <!-- SECCIÓN 1: DATOS -->
                <div class="input-group">
                    <label>TUS DATOS</label>
                    <div class="grid-2">
                        <div class="input-wrapper">
                            <i class="fas fa-user"></i>
                            <input type="text" name="name" placeholder="Nombre completo" required>
                        </div>
                        <div class="input-wrapper">
                            <i class="fas fa-envelope"></i>
                            <input type="email" name="email" placeholder="Correo electrónico" required>
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN 2: SERVICIO -->
                <div class="input-group">
                    <label>ELIGE EL TRATAMIENTO</label>
                    <div class="service-grid">
                        <label class="service-card">
                            <input type="radio" name="service" value="Lavado Detallado" required>
                            <div class="card-inner">
                                <i class="fas fa-soap"></i>
                                <span>Lavado Detallado</span>
                            </div>
                        </label>
                        <label class="service-card">
                            <input type="radio" name="service" value="Pulido Pintura">
                            <div class="card-inner">
                                <i class="fas fa-spray-can"></i>
                                <span>Corrección Pintura</span>
                            </div>
                        </label>
                        <label class="service-card">
                            <input type="radio" name="service" value="Ceramico 9H">
                            <div class="card-inner">
                                <i class="fas fa-gem"></i>
                                <span>Cerámico 9H</span>
                            </div>
                        </label>
                        <label class="service-card">
                            <input type="radio" name="service" value="Interior Full">
                            <div class="card-inner">
                                <i class="fas fa-couch"></i>
                                <span>Interior Full</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- SECCIÓN 3: FECHA MEJORADA (Flatpickr) -->
                <div class="input-group">
                    <label>FECHA DE INGRESO</label>
                    <div class="input-wrapper date-wrapper">
                        <!-- Icono y Input Personalizado -->
                        <i class="far fa-calendar-alt"></i>
                        <input type="text" name="date" id="premiumDate" placeholder="Selecciona una fecha..." required>
                    </div>
                </div>

                <button type="submit" class="submit-btn">
                    <span>CONFIRMAR RESERVA</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>
    </div>
</div>

<style>
    /* === LAYOUT & BASICOS === */
    .split-layout {
        display: flex; min-height: 100vh;
        background: #000; margin-top: -80px; padding-top: 80px;
    }
    .visual-side {
        width: 45%; position: relative;
        background-image: url('https://images.unsplash.com/photo-1617788138017-80ad40651399?auto=format&fit=crop&w=1920&q=80');
        background-size: cover; background-position: center;
        display: flex; align-items: center; padding: 60px; color: #fff;
    }
    .overlay { position: absolute; inset: 0; background: linear-gradient(to right, rgba(0,0,0,0.8), rgba(0,0,0,0.4)); z-index: 1; }
    .visual-content { position: relative; z-index: 2; max-width: 500px; }
    
    .brand-tag {
        background: #ff0000; color: #fff; padding: 4px 12px;
        font-size: 0.8rem; font-weight: 800; display: inline-block;
        margin-bottom: 20px; letter-spacing: 2px;
    }
    .visual-side h1 { font-size: 3.5rem; line-height: 1; font-weight: 800; margin-bottom: 20px; font-family: 'Outfit', sans-serif; }
    .text-stroke { -webkit-text-stroke: 1px #fff; color: transparent; }
    .visual-desc { font-size: 1.1rem; color: #ccc; margin-bottom: 40px; line-height: 1.6; }
    
    .features-list { display: flex; flex-direction: column; gap: 20px; }
    .feature { display: flex; align-items: center; gap: 15px; }
    .f-icon { width: 40px; height: 40px; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; color: #ff0000; border-radius: 50%; }
    .feature strong { display: block; font-size: 0.95rem; }
    .feature span { font-size: 0.85rem; color: #888; }

    /* === FORMULARIO === */
    .form-side { width: 55%; background: #050505; display: flex; align-items: center; justify-content: center; padding: 40px; }
    .form-container { width: 100%; max-width: 500px; }
    .form-header { margin-bottom: 30px; }
    .form-header h2 { font-size: 2rem; color: #fff; margin: 0; font-weight: 700; }
    .form-header p { color: #666; margin-top: 5px; }

    .input-group { margin-bottom: 25px; }
    .input-group label { display: block; color: #888; font-size: 0.75rem; font-weight: 700; letter-spacing: 1px; margin-bottom: 10px; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    
    .input-wrapper { position: relative; background: #0f0f0f; border: 1px solid #222; border-radius: 8px; transition: 0.3s; }
    .input-wrapper:focus-within { border-color: #ff0000; background: #150505; }
    .input-wrapper i { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #555; z-index: 10; }
    .input-wrapper input { width: 100%; background: transparent; border: none; color: #fff; padding: 15px 15px 15px 45px; font-family: 'Outfit', sans-serif; outline: none; font-size: 1rem; }

    /* Cards Servicios */
    .service-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .service-card input { display: none; }
    .card-inner { padding: 15px; border: 1px solid #222; border-radius: 8px; background: #0f0f0f; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 8px; color: #888; text-align: center; }
    .card-inner i { font-size: 1.2rem; margin-bottom: 5px; }
    .card-inner span { font-size: 0.85rem; font-weight: 600; }
    .service-card input:checked + .card-inner { background: #ff0000; color: #fff; border-color: #ff0000; box-shadow: 0 5px 15px rgba(255,0,0,0.3); transform: translateY(-2px); }

    /* Botón */
    .submit-btn { width: 100%; background: #fff; color: #000; border: none; padding: 18px; border-radius: 8px; font-weight: 800; font-size: 1rem; letter-spacing: 0.5px; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; transition: 0.3s; }
    .submit-btn:hover { background: #ccc; transform: translateY(-1px); }

    /* OVERRIDES FLATPICKR (Para integrarlo al diseño) */
    .flatpickr-calendar.dark {
        background: #0f0f0f; border: 1px solid #222; box-shadow: 0 10px 40px rgba(0,0,0,0.8);
    }
    .flatpickr-day.selected {
        background: #ff0000; border-color: #ff0000;
    }
    .flatpickr-months .flatpickr-month {
        color: #fff; fill: #fff;
    }
    .flatpickr-current-month .flatpickr-monthDropdown-months {
        font-family: 'Outfit', sans-serif; font-weight: 700;
    }
    .flatpickr-weekday {
        color: #888;
    }

    @media (max-width: 900px) {
        .split-layout { flex-direction: column; padding-top: 60px; }
        .visual-side, .form-side { width: 100%; }
        .visual-side { height: 300px; padding: 30px; }
        .visual-side h1 { font-size: 2.5rem; }
        .features-list { display: none; }
        .form-side { padding: 30px 20px; }
        .grid-2 { grid-template-columns: 1fr; }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Inicializar Flatpickr en Español
        flatpickr("#premiumDate", {
            locale: "es",              // Idioma español
            minDate: "today",          // No permitir fechas pasadas
            altInput: true,            // Mostrar formato amigable visualmente
            altFormat: "l j F, Y",     // Ej: "Domingo 30 Noviembre, 2025"
            dateFormat: "Y-m-d",       // Formato que se envía al servidor (Base de datos)
            disable: [
                function(date) {
                    // Opcional: Deshabilitar Domingos si no trabajas
                    // return (date.getDay() === 0);
                }
            ],
            theme: "dark"
        });
    });
</script>

{% endblock %}