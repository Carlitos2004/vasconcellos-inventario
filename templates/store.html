{% extends "base.html" %}
{% block title %}Catálogo Oficial - Vasconcellos{% endblock %}
{% block content %}

<!-- HERO BANNER -->
<div class="hero-banner">
    <img src="https://images.unsplash.com/photo-1617788138017-80ad40651399?auto=format&fit=crop&w=1920&q=80" class="hero-bg" alt="Luxury Car">
    <div class="banner-content">
        <h1>VASCONCELLOS<br><strong>AUTOMOTRIZ</strong></h1>
        <p>Detallado profesional y productos de clase mundial.</p>
        <a href="#catalogo" class="btn btn-primary">Ver Colección</a>
    </div>
</div>

<div class="container">
    
    <!-- SERVICIOS EXCLUSIVOS (Restaurado) -->
    <section class="content-section">
        <h2 class="section-title"><span>Servicios</span> Exclusivos</h2>
        <div class="services-grid">
            <div class="service-item reveal-item">
                <i class="fas fa-gem"></i>
                <h3>Detallado Premium</h3>
                <p>Restauración completa de interior y exterior al detalle.</p>
            </div>
            <div class="service-item reveal-item" style="transition-delay: 0.1s;">
                <i class="fas fa-spray-can"></i>
                <h3>Corrección de Pintura</h3>
                <p>Eliminación de microrrayas y swirls para un acabado espejo.</p>
            </div>
            <div class="service-item reveal-item" style="transition-delay: 0.2s;">
                <i class="fas fa-shield-alt"></i>
                <h3>Cerámico 9H</h3>
                <p>La máxima protección disponible para la pintura de tu vehículo.</p>
            </div>
        </div>
    </section>

    <!-- OFERTAS ESPECIALES (Restaurado) -->
    <section class="content-section">
        <h2 class="section-title"><span>Ofertas</span> Especiales</h2>
        <div class="promotions-grid">
            <div class="promo-card reveal-item">
                <h3>Ceras de Carnauba</h3>
                <p style="color:#aaa; margin-bottom:20px;">20% de descuento en toda la línea natural.</p>
                <a href="#catalogo" class="btn btn-secondary" style="width:fit-content">Ver Oferta</a>
            </div>
            <div class="promo-card reveal-item" style="background: linear-gradient(135deg, #111, #1a1a1a); transition-delay: 0.2s;">
                <h3>Kit de Inicio</h3>
                <p style="color:#aaa; margin-bottom:20px;">Shampoo, guante y toalla de secado por $24.990.</p>
                <a href="#catalogo" class="btn btn-primary" style="width:fit-content">Lo Quiero</a>
            </div>
        </div>
    </section>

    <!-- CATÁLOGO DE PRODUCTOS -->
    <section id="catalogo" class="content-section">
        <div class="header-toolbar">
            <input id="search-input" class="search-input" placeholder="Buscar productos...">
            <select id="sort-select" class="sort-select">
                <option value="name-asc">A-Z</option>
                <option value="price-asc">Precio Menor</option>
                <option value="price-desc">Precio Mayor</option>
            </select>
        </div>

        <!-- GRILLA -->
        <div id="product-grid" class="product-grid">
            {% for product in products %}
            <div class="card product-card reveal-item" 
                 data-name="{{ product.name }}" 
                 data-price="{{ product.price }}">
                
                <div class="card-image-container">
                    <img src="{{ product.image_url if product.image_url else 'https://via.placeholder.com/400x300?text=Sin+Imagen' }}" 
                         alt="{{ product.name }}" 
                         class="card-image" 
                         loading="lazy">
                </div>
                
                <div class="card-body">
                    <h3>{{ product.name }}</h3>
                    <div class="price">${{ "{:,.0f}".format(product.price).replace(',', '.') }}</div>
                    <button class="add-to-cart-btn" data-id="{{ product.id }}">
                        AGREGAR AL CARRITO
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- PAGINACIÓN RACING (CON ICONOS DE AUTOS) -->
        <div class="pagination-controls">
            <button id="page-prev" class="page-btn" title="Anterior">
                <!-- Auto mirando a la izquierda (espejo) -->
                <i class="fas fa-car-side" style="transform: scaleX(-1);"></i>
            </button>
            
            <span id="page-info" class="page-indicator">PÁGINA 1 / 1</span>
            
            <button id="page-next" class="page-btn" title="Siguiente">
                <i class="fas fa-car-side"></i>
            </button>
        </div>
    </section>

</div>

<!-- SIDEBAR CARRITO -->
<div id="cart-backdrop" class="cart-backdrop"></div>
<aside id="cart-sidebar" class="cart-panel">
    <div class="cart-header">
        <h3>TU CARRITO</h3>
        <button id="close-cart-btn" style="background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer;">&times;</button>
    </div>
    <div id="cart-items-container" class="cart-items"></div>
    <div class="cart-footer">
        <div style="display:flex; justify-content:space-between; margin-bottom:20px; font-size:1.1rem;">
            <span style="color:#888">Total estimado</span>
            <strong id="cart-total-price">$0</strong>
        </div>
        <button id="checkout-btn" class="checkout-btn">
            CONFIRMAR PEDIDO <i class="fab fa-whatsapp"></i>
        </button>
    </div>
</aside>

<!-- Botón Volver Arriba -->
<div id="back-to-top" title="Volver arriba">
    <i class="fas fa-arrow-up"></i>
</div>

<div id="toast-container"></div>

<style>
    /* Estilos Paginación Racing (Inyectados aquí para asegurar carga) */
    .pagination-controls {
        display: flex; justify-content: center; align-items: center; gap: 20px;
        margin-top: 60px; padding-top: 30px; border-top: 1px solid #222;
    }
    .page-btn {
        background: transparent; border: 2px solid #444; color: #fff;
        width: 50px; height: 50px; border-radius: 50%; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        font-size: 1.2rem; transition: 0.3s;
    }
    .page-btn:hover:not(:disabled) {
        background: var(--accent-red); border-color: var(--accent-red); transform: scale(1.1);
        box-shadow: 0 0 15px rgba(255,0,0,0.4);
    }
    .page-btn:disabled {
        opacity: 0.3; cursor: not-allowed; border-color: #222;
    }
    .page-indicator {
        font-family: 'Outfit', monospace; color: #888; font-weight: 700; 
        letter-spacing: 0.1em; text-transform: uppercase;
    }
</style>

{% endblock %}